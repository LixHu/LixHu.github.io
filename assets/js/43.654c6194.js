(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{545:function(e,t,n){"use strict";n.r(t);var a=n(6),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("blockquote",[n("p",[e._v("今天做项目时遇到一个问题，要根据头部选择的ID来切换显示不同的数据内容，就涉及到了监听全局变量的问题\n后引入vuex， 然后使用$store作为全局变量的使用")])]),e._v(" "),n("blockquote",[n("p",[e._v("下面是使用vuex的介绍，使用到了action, mutations")])]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n    state: {\n        gameId: ''\n    },\n    getters: {\n        getGameId:function( state ) {\n            return state.gameId\n        }\n    },\n    mutations: {\n        setValueGameId: function(state, value) {\n            state.gameId = value\n        }\n    },\n    actions: {\n        setGameId: function(context, value) {\n            context.commit('setValueGameId', value)\n        }\n    }\n})\n\nexport default store\n")])])]),n("blockquote",[n("p",[e._v("然后再main.js中引入store")])]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    import Vue from 'vue'\n    import store from './utils/store'\n    \n    new Vue({\n      store,\n      router,\n      render: h => h(App)\n    }).$mount('#app')\n")])])]),n("blockquote",[n("p",[e._v("然后子组件中使用gameId 属性，并监听其变化, 需要在computed中写一个计算函数返回状态管理中的gameId\n此处的子组件就能监听到gameId 的变化，并能进行操作")])]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('    <template>\n        <div>{{ gameId }}</div>\n    </template>\n    \n    <script>\n        export default {\n            data() {\n                return {\n                    \n                }\n            },\n            methods: {\n                // 切换gameId的值，使监听生效\n                setGameIds(value) {\n                    // 使用状态管理中的action，设置gameId的值\n                    this.$store.dispatch("setGameId", value)\n                }\n            },\n            computed: {\n                getGameIds: {\n                    return this.$store.state.gameId\n                }\n            },\n            watch: {\n                getGameIds(val) {\n                    console.log(val)\n                }\n            }\n        }\n    <\/script>\n')])])]),n("hr"),e._v(" "),n("blockquote",[n("p",[e._v("此处只是记录一下，并没有深入研究vuex，写的不好的地方请见谅。勿喷")])])])}),[],!1,null,null,null);t.default=s.exports}}]);