(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{542:function(e,t,a){"use strict";a.r(t);var s=a(6),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("blockquote",[a("p",[e._v("很多时候需要用户需要获取用户ip地址来根据不同的地区来做不同的内容，这时，就需要获取用户ip，但是请求接口时会影响接口速度。所以这时就用到了PHP的GeoIp扩展。")])]),e._v(" "),a("h1",{attrs:{id:"安装geoip扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装geoip扩展"}},[e._v("#")]),e._v(" 安装geoIp扩展")]),e._v(" "),a("blockquote",[a("ol",[a("li",[e._v("安装geoIp扩展 我环境是CentOs ，官网提供的安装方式为")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("   @CentOs 6.4\n   # yum install GeoIP-devel\n   # pecl install geoip\n")])])]),a("blockquote",[a("p",[e._v("或者手动下载包安装")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("   # wget https://pecl.php.net/get/geoip-1.1.1.tgz\n   # tar -zxvf geoip-1.1.1.tgz \n   # cd geoip-1.1.1\n   # phpize\n   # .configure --with-php-config=php-config --with-geoip\n   # make && make install \n")])])]),a("blockquote",[a("ol",{attrs:{start:"2"}},[a("li",[e._v("然后把extension=geoip.so 加入php.ini")])])]),e._v(" "),a("h1",{attrs:{id:"测试geoip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试geoip"}},[e._v("#")]),e._v(" 测试geoIp")]),e._v(" "),a("blockquote",[a("p",[e._v("下面就直接用php获取用户的地址信息")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("    <?php\n        $ip = $_SERVER['REMOTE_ADDR'];\n        $address = geoip_record_by_name($ip);\n        var_dump($address);\n    ?>\n")])])]),a("blockquote",[a("p",[e._v("我知道的region编号所代表的地区如下:")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("- 30 广东\n- 22 北京\n- 23 上海\n- 2  浙江\n- 11 湖南\n- 15 甘肃\n- 10 河北\n- 29 云南\n- 25 山东\n- 4  江苏\n- 33 重庆\n- 5  吉林")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);